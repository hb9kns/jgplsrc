NB. 13 : y ---------------------------------------------------------------

ar=: 5!:1

eq=: 4 : 0
 0!:100 'f9=.',x
 g9 =. 13 : y
 assert. 'f9' -:&ar&< 'g9'
 1
)

eq1=: 4 : 0
 x eq y
 assert. (3 : y -: 13 : y) 123
 1
)

eq2=: 4 : 0
 x eq y
 assert. 456 (4 : y -: 13 : y) 123
 1
)

eq12=: 4 : 0
 x eq y
 assert.     (3 : y -: 13 : y) 123
 assert. 456 (4 : y -: 13 : y) 123
 1
)

eqx=: 3 : 0
 f9=. (3+(<,'x')e.;:y) : y
 g9=. 13 : y
 assert. 'f9' -:&ar&< 'g9'
 1
)


NB. 13 : y constants -----------------------------------------------------

'0"_'       eq12 '0'
'1"_'       eq12 '1'
'1:'        eq12 '2-1'
'1x"_'      eq12 '1x'
'1r2"_'     eq12 '1r2'
'3:'        eq12 '2+1'
'_3:'       eq12 '1-4'
'11"_'      eq12 '10+1'
'(i.2 3)"_' eq12 'i.2 3'
'''a''"_'   eq12 '''a'''
'''abc''"_' eq12 '''abc'''


NB. 13 : y monads --------------------------------------------------------

'*:'                   eq1 '*:Y'
'#'                    eq1 '#Y'
'[: *: >:'             eq1 '*: >: Y'
'[: +: [: -: [: *: %:' eq1 '+: -: *: %: Y'
'[: i. #'              eq1 'i. # Y'
'<: * >:'              eq1 '(<:Y)*>:Y'
'+/ % #'               eq1 '(+/Y)%#Y'
'* # ]'                eq1 '(*Y)#Y'
'] #~ 0 < ]'           eq1 '(0<Y)#Y'
'2   ^~ ]'             eq1 'Y^2'
'_1  ^~ ]'             eq1 'Y^_1'
'12  ^~ ]'             eq1 'Y^12'
'0.5 ^~ ]'             eq1 'Y^0.5'
'2  ^. ]'              eq1 '2^.Y'
'10 ^. ]'              eq1 '10^.Y'
'3 + 4 * ]'            eq1 '3 + 4 * Y'
'7 * ]'                eq1 '(3+4)*Y'
'_10 ]\ ":'            eq1 '_10 ]\ ": Y'
'+/ % #'               eq1 '(13 : ''(+/y)%#y'') y'

'2= ]'                 eq1 'Y= 2'
'2<.]'                 eq1 'Y<.2'
'2>.]'                 eq1 'Y>.2'
'2+ ]'                 eq1 'Y+ 2'
'2+.]'                 eq1 'Y+.2'
'1+:]'                 eq  'Y+:1'
'2* ]'                 eq1 'Y* 2'
'2*.]'                 eq1 'Y*.2'
'1*:]'                 eq  'Y*:1'
'2-:]'                 eq1 'Y-:2'
'2~:]'                 eq1 'Y~:2'

'2< ]'                 eq1 'Y> 2'
'2<:]'                 eq1 'Y>:2'
'2> ]'                 eq1 'Y< 2'
'2>:]'                 eq1 'Y<:2'

'(200$''3'') {~ ]'     eq1 'Y{a' [ a=: 200$'3'


NB. 13 : y dyads ---------------------------------------------------------

'*'                    eq2 'X*Y'
','                    eq2 'X,Y'
'+ * -'                eq2 '(X+Y)*(X-Y)'
'3 + 4 * >.'           eq2 '3 + 4 * X>.Y'

'/:~'                  eq1 'Y/:Y'
'/:~'                  eq2 'Y/:X'
'[ /: ['               eq2 'X/:X'


NB. 13 : y can not translate ---------------------------------------------

eqx '+:^:Y Y'
eqx '+:^:X Y'
eqx '(Y * *:)Y'
eqx '(X * *:)Y'
eqx 'd*d=:Y'
eqx 'X>.d*d=:Y'
eqx '3+Y=.Y+2'
eqx '3+X=.X+2'


NB. 13 : y local defns ---------------------------------------------------

'0  <  20 -~ ]'                 eq1 '0<t  [ t=. Y - 20'
'30 ^~ 20 -~ ]'                 eq1 't^30 [ t=. Y - 20'
'2  ^  10 -~ ]'                 eq1 '2^ t [ t=. Y - 10'
'2  ^  10 -  ]'                 eq1 '2^ t [ t=. 10 - Y'

'[:             -:  7-~]'       eq1 '   -:t [ t=. Y-7'
'[: ([:      *: -:) 7-~]'       eq1 ' *:-:t [ t=. Y-7'
'[: ([: ^ [: *: -:) 7-~]'       eq1 '^*:-:t [ t=. Y-7'

'              4 +    12-~]'    eq1 '    4+t=.Y-12'
'[: (    [: *: 4 + ]) 12-~]'    eq1 '  *:4+t=.Y-12'
'        [: *:        12-~]'    eq1 '  *:  t=.Y-12'
'[: (6 -    *:      ) 12-~]'    eq1 '6-*:  t=.Y-12'
'[: (6 - [: *: 4 + ]) 12-~]'    eq1 '6-*:4+t=.Y-12'

'[: ([:    *: -:) -:'           eq1 '*:-:  t=. -:Y'
'[: ((7<  ]) # ]) -:'           eq1 '(7<t)#t=. -:Y'
'[: ((7< ]) # ]) -:'            eq1 '(t>7)#t=. -:Y'

'[: (%:    - *: ) 12-~]'        eq1 '(%:t) - *: t=. Y-12'
'[: (%:    - 1<]) 12-~]'        eq1 '(%:t) - 1< t=. Y-12'
'[: ((0<]) - *: ) 12-~]'        eq1 '(0<t) - *: t=. Y-12'
'[: ((0<]) - 1<]) 12-~]'        eq1 '(t>0) - 1< t=. Y-12'

'*: + -:'                       eq1 's+t [ s=. *:Y  [ t=. -:Y'
'(] + #) + #'                   eq1 '(s+t) [ s=.Y+t[t=.#Y'

'+         =      -'            eq2 ' s   =   t [ s=. X+Y [ t=. X-Y'
'+ (     [ =2 %]) -'            eq2 ' s   = 2%t [ s=. X+Y [ t=. X-Y'
'+ (     [ =[:%]) -'            eq2 ' s   =  %t [ s=. X+Y [ t=. X-Y'
'+ (     [ =  % ) -'            eq2 ' s   = s%t [ s=. X+Y [ t=. X-Y'
'+ ((3*  [)=   ]) -'            eq2 '(s*3)=   t [ s=. X+Y [ t=. X-Y'
'+ ((3*  [)=2 %]) -'            eq2 '(s*3)= 2%t [ s=. X+Y [ t=. X-Y'
'+ ((3*  [)=[:%]) -'            eq2 '(s*3)=  %t [ s=. X+Y [ t=. X-Y'
'+ ((3*  [)=  % ) -'            eq2 '(s*3)= s%t [ s=. X+Y [ t=. X-Y'
'+ (([:*:[)=   ]) -'            eq2 '(*:s)=   t [ s=. X+Y [ t=. X-Y'
'+ (([:*:[)=2 %]) -'            eq2 '(*:s)= 2%t [ s=. X+Y [ t=. X-Y'
'+ (([:*:[)=[:%]) -'            eq2 '(*:s)=  %t [ s=. X+Y [ t=. X-Y'
'+ (([:*:[)=  % ) -'            eq2 '(*:s)= s%t [ s=. X+Y [ t=. X-Y'

'+ (([:*:[)=  % ) -'            eq2 '(*:s)= s%t [ s=. X+Y [ t=. X-Y'
'+ (([:*:])=  % ) -'            eq2 '(*:t)= s%t [ s=. X+Y [ t=. X-Y'
'- (([:*:])=  % ) +'            eq2 '(*:s)= t%s [ s=. X+Y [ t=. X-Y'

'+ (*=   ]) -'                  eq2 '(s*t)=   t [ s=. X+Y [ t=. X-Y'
'+ (*=2 %]) -'                  eq2 '(s*t)= 2%t [ s=. X+Y [ t=. X-Y'
'+ (*=[:%]) -'                  eq2 '(s*t)=  %t [ s=. X+Y [ t=. X-Y'
'+ (*=  % ) -'                  eq2 '(s*t)= s%t [ s=. X+Y [ t=. X-Y'
'+ (*=  % ) -'                  eq2 '(t*s)= s%t [ s=. X+Y [ t=. X-Y'
'- (%=  * ) +'                  eq2 '(t%s)= s*t [ s=. X+Y [ t=. X-Y'

'(20-~])         *      +'      eq2 '   s *   t [ s=. Y-20 [ t=. X+Y'
'(20-~]) ([      *12-]) +'      eq2 '   s *12-t [ s=. Y-20 [ t=. X+Y'
'(20-~]) (([:*:[)*   ]) +'      eq2 '(*:s)*   t [ s=. Y-20 [ t=. X+Y'
'(20-~]) (([:*:[)*12-]) +'      eq2 '(*:s)*12-t [ s=. Y-20 [ t=. X+Y'

'9:'                                         eq 't=.9'
'99"_'                                       eq 't=. 99'
'_99 ". ]'                                   eq '(t=._99)".Y'
'[: {: _99 (0,[~:".) ]'                      eq '{:0,nn~:(nn=._99)". Y'
'3 + 4 * ]'                                  eq '3+4*Y'
'13 + 14 * ]'                                eq '13+14*Y'
'''ABC'' {~ ''abc'' i. ]'                    eq '(''abc'' i. Y){''ABC'''
'+'                                          eq 'Y+X' 
'7 + ]'                                      eq 'Y+7'
'+ - *'                                      eq '(X+Y)-(Y*X)'
'17 < ]'                                     eq 'Y>17'
'% * [: -: +'                                eq '(-:X+Y)*X%Y'
'3 + *:'                                     eq '3+t [ t=. *:Y'
'[: ((0 < ]) # ]) expensive'                 eq '(t>0)#t=. expensive Y'
'* (<. - >.) %'                              eq '(s<.t)-s>.t [ s=. X*Y [ t=. X%Y'
'[: ((''d'' = 4 {"1 [: > 4 {"1 ]) # ]) 1!:0' eq '(''d''=4{"1 >4{"1 t)#t=. 1!:0 Y'

isnum=: 13 : '{:0,nn~:(nn=._99)".y'
'[: {: (_99) (0 , [ ~: ".) ]' -: 5!:5 <'isnum'
0 = isnum 'abc'
1 = isnum '1.234e7'

isnum=: 13 : '{:0,nn~:(nn=._1)".y'
'[: {: (_1) (0 , [ ~: ".) ]' -: 5!:5 <'isnum'
0 = isnum 'abc'
1 = isnum '1.234e7'


4!:55 ;:'a ar eq eq1 eq12 eq2 eqx isnum'


