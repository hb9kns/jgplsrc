NB. ^: ------------------------------------------------------------------

f1 =: 3&+
f2 =: +
g  =: +:@[ + 3&*@]
X  =: ?30
Y  =: ?30
n  =: 3+?10

(  f1^:n Y) -: ".(;n$<'f1 '),' Y'
(X f2^:n Y) -: X&f2^:n Y
(  f1^:g Y) -: f1^:(g Y) Y
(X f2^:g Y) -: X&f2 ^: (X g Y) Y

a=:t=: 911
4!:55 ;:'t X Y'
b=: 7!:0 ''
a=: 7!:0 ''

X=: 1000?1e7
Y=: ;~^:5 X
t=: ;~;~;~;~;~X
t -: Y
X=: 0
t -: Y

4!:55 ;:'t X Y'
b=: 7!:0 ''
a -: b

X=: 1000?1e7
Y=: <^:5 X
t=: <<<<<X
t -: Y
X=: 0
t -: Y

4!:55 ;:'t X Y'
b=: 7!:0 ''
a -: b

f=: 3 : 0
 if. y do. 
  assert. 'limit error' -: (32 ?@$ 2)&~:^:] etx (4$32) ?@$ 2 
 end.
 1
)

f -.IF64

234 0 0 0 -: 0"0^:(0 2 3 7) 234
3j4 0 0 0 -: 0"0^:(0 2 3 7) 3j4

(o.^:(i.3 4)1) -: (o.1)^i.3 4
(o.^:p 1)      -: (o.1)^p=:_7+?4 5$15

(+/^:4 i. 2 3 4 5) -: +/,i.2 3 4 5
(o.^:(6) 2)        -: 2*(o.1)^6

f  =: 2&-
g  =: *&3
(f f^:_1 X) -: X=:?100
(f^:_1 f X) -: X
(g g^:_1 X) -: X=:?100
(g^:_1 g X) -: X

NB. applying f zero times when appropriate

f=: >: [ ".@(('c=:>:c')&[)
X=: 20 ?@$ 0
(f X) -: >:X [ c=: 0
(c=>./,n) *.        X  -: f^:n X [ c=: 0 [ n=: 0
(c=>./,n) *. (>:^:n X) -: f^:n X [ c=: 0 [ n=: 10 20 $ 0
(c=>./,n) *. (>:^:n X) -: f^:n X [ c=: 0 [ n=: 10 20 ?@$ 5

X=: 1:`2:`3:
Y=: 'asdf'
(X ,&<^:[ Y) -: X ,&<^:(X[Y) Y


NB. ^: Newton's Method --------------------------------------------------

eps =: 1e_8&*@+ 0&=
Da  =: 1 : '[ %~ + -&x ]'      NB. secant slope adverb with absolute diff.
D   =: 1 : 'eps x Da ]'        NB. secant slope adverb with relative diff.
Nt  =: 1 : '- x % x D'         NB. one iteration of Newton's method

*./ 1e_6 > | 3 - 3&* D 4 5 6
*./ 1e_6 > | (2&^ D 4 5 6) - (^.2)*2^4 5 6

(%:2) -: 3 : '(y^2)-2' Nt^:_ x=:1


NB. ^:_1 ----------------------------------------------------------------

ar   =: 5!:1
lr   =: 5!:5
inv  =: 1 : 'x^:_1'
test =: 2 : '((x b._1)-:lr<''y'') *. (y b._1)-:lr<''x''' 
f_g  =: 2 : ('f=.y :.x f.'; '((x b._1)-:lr<''y'') +. (x b._1)-:lr<''f''')
eq   =: 2 : '(ar<''x'') -: (ar<''y'')'
testx=: 2 : '(x b._1)-:lr<''y''' 

<  test >
<: test >:
+  test +
+: test -:
-  test -
-. test -.
*: test %:
%  test %
%. test %.
^  test ^.
|. test |.
|: test |:
,: test {.
#. test #:
/: test /:
[  test [
]  test ]
{. test ,:
". test ":
C. test C.
p. test p.
*/ test q:

({=) test (i."1&1)

m&+  testx ((-m)&+)          [ m=:o.?10000
m&-  testx (m&-)             [ m=:^0j1*?1000
-&m  testx (m&+)             [ m=:^0j1*?1000
m&*  testx ((%m)&*)          [ m=:o.?10000
m&%  testx (m&%)             [ m=:^0j1*?1000
%&m  testx (m&*)             [ m=:^0j1*?1000
m&o. testx ((-m)&o.)         [ m=:o.?10000
m&|. testx ((-m)&|.)         [ m=:o.?10000
m&^. testx (m&^)             [ m=:o.?10000
^.&m testx (%:&m)            [ m=:o.?10000
m&^  testx (m&^.)            [ m=:o.?10000
^&m  testx (m&%:)            [ m=:o.?10000
m&%: testx (^&m)             [ m=:o.?10000
%:&m testx (^.&m)            [ m=:o.?10000
p&{  testx ((/:p)&{ )        [ p=:?~13

([: *: [: +: [: -:    |.  ) testx ([: |. [: +: [: -: %:)
([: *: [: +: [: -: [: |. ]) testx ([: |. [: +: [: -: %:)

g=: 3!:2
(lr <'g') -: 0&(3!:1) b. _1
(lr <'g') -: 1&(3!:1) b. _1
(lr <'g') -: 0&(3!:3) b. _1
(lr <'g') -: 1&(3!:3) b. _1

i     -: {&m ^:_1 (i=: ?3 2$#m) { m=:?5 3$1000
(i{m) -: m&i.^:_1 (i=: ?3 2$#m) [ m=:?5 3$1000

([ -: m&#.    inv @ (m&#.    )) X=:1,?7$m [ m=:2+?7
([ -: (4$m)&#:inv @ ((4$m)&#:)) X=:  ?m^4 [ m=:2+?7

(-: f^:_1 @ f=:p:) X=:?5$100
(-: f^:_1 @ f=:+.) X=:j./_50+?2 10$100
(-: f^:_1 @ f=:*.) X=:j./_50+?2 10$100

+ /\  f_g (-    |.!.0 )
+ /\. f_g (- 1&(|.!.0))
* /\  f_g (%    |.!.1 )
* /\. f_g (% 1&(|.!.1))
= /\  f_g (=    |.!.1 )
= /\. f_g (= 1&(|.!.1))
~:/\  f_g (~:   |.!.0 )
~:/\. f_g (~:1&(|.!.0))
- /\  f_g ((-|.!.0) *"_1 $&1 _1@#)
- /\. f_g (+ 1&(|.!.0))
% /\  f_g ((%|.!.1) ^"_1 $&1 _1@#)
% /\. f_g (* 1&(|.!.1))

NB. <;.1    f_g ;
NB. <;.2    f_g ;
10j2&": f_g ".

X -: + /\ ^:_1 + /\ X=:>:?7 3$100
X -: + /\.^:_1 + /\.X
X -: - /\ ^:_1 - /\ X
X -: - /\.^:_1 - /\.X
X -: * /\ ^:_1 * /\ X
X -: * /\.^:_1 * /\.X
X -: % /\ ^:_1 % /\ X
X -: % /\.^:_1 % /\.X

Y -: = /\ ^:_1 = /\ Y=:?12 5$2
Y -: = /\.^:_1 = /\.Y
Y -: ~:/\ ^:_1 ~:/\ Y
Y -: ~:/\.^:_1 ~:/\.Y

f=: 3: * 12"_ + ]
X -: f f^:_1 X=:0.1*1+?2 10$100
X -: f^:_1 f X

f=: [: 2&* 10&^.
X -: f f^:_1 X=:0.1*1+?2 10$100
X -: f^:_1 f X

cap=: [:
f=: cap 2&* 10&^.
X -: f f^:_1 X=:0.1*1+?2 10$100
X -: f^:_1 f X

plus =: +
minus=: -
times=: *

(12&+^:_1 -: 12&plus ^:_1) X=:?2 10$100
(+&12^:_1 -: plus&12 ^:_1) X=:?2 10$100

(12&-^:_1 -: 12&minus^:_1) X=:?2 10$100
(-&12^:_1 -: minus&12^:_1) X=:?2 10$100

(+~^:_1 -: plus ~^:_1) X=:?2 10$100
(*~^:_1 -: times~^:_1) X=:?2 10$100

f_loc_     =: -:
fi_loc_    =: 3 : 'twice y'
twice_loc_ =: +:
g          =: f_loc_ :. fi_loc_

f=: + :. *
12 -: 3 (f^:_1) 4

X -: g g^:_1 X=:?2 10$100
X -: g^:_1 g X=:?2 10$100

m=: (_500+?1000),2^?20
m&p. testx ((({:m)%~1,~-{.m)&p.)
'domain error' -: ex '5 0&p. ^:_1 ]17'

b=: ? 100$2
n=: +/b
Expand=: (* +/\)@[ { -@>:@#@] {. ]
(b&Expand -: b&#^:_1) X=:    ?n$1000
(b&Expand -: b&#^:_1) X=:a.{~?n$#a.
(b&Expand -: b&#^:_1) X=:Y {~?n$#Y=:;:'tris kai deka phobia finden tush'
(b&Expand -: b&#^:_1) X=:    ?(n,5)$1000
(b&Expand -: b&#^:_1) X=:a.{~?(n,5)$#a.
(b&Expand -: b&#^:_1) X=:Y {~?(n,5)$#Y=:;:'tris kai deka phobia finden tush'
(b&Expand -: b&#^:_1) X=:    ?(n,2 5)$1000
(b&Expand -: b&#^:_1) X=:a.{~?(n,2 5)$#a.
(b&Expand -: b&#^:_1) X=:Y {~?(n,2 5)$#Y=:;:'tris kai deka phobia finden tush'

(2&+&.(b&#) Y) -: b*2+Y=:?((#b),5)$1000

'a a  a' -: 1 0 1 0 0 1&#^:_1 'a'

'length error' -: 1 0 1 0 0 1&#^:_1 etx 'ab'
'length error' -: 1 0 1 0 0 1&#^:_1 etx 'abcd'
'length error' -: 1 0 1 0 0 1&#^:_1 etx ,'a'

'length error' -: 1 0 1 0 0 1&#^:_1 etx i.2 4
'length error' -: 1 0 1 0 0 1&#^:_1 etx i.4 6
'length error' -: 1 0 1 0 0 1&#^:_1 etx i.1 3

X -: ]&.(   _2&|:) X=: ?2 3 4 5$1000
X -: ]&.(_2 _3&|:) X

18!:55 ;:'loc'


4!:55 ;:'a b c D Da Nt Expand ar cap eps eq f f1 f2 f_g '
4!:55 ;:'g h hi i id inv lr m minus n p plus '
4!:55 ;:'t test testx times X Y '


